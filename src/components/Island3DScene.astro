---
// This component loads the 3D island on the client side
---

<div id="island-3d-container" class="island-container"></div>

<script>
  import { Island3D } from './Island3D';

  // Initialize the 3D scene when the component is mounted
  const container = document.getElementById('island-3d-container');

  if (container) {
    let island3D: Island3D | null = null;

    // Wait for the container to be properly sized
    const initScene = () => {
      if (container.clientWidth > 0 && container.clientHeight > 0) {
        island3D = new Island3D(container);
      }
    };

    // Initialize after a short delay to ensure layout is ready
    setTimeout(initScene, 100);

    // Cleanup on navigation
    document.addEventListener('astro:before-swap', () => {
      if (island3D) {
        island3D.dispose();
      }
    });
  }
</script>

<style>
  .island-container {
    width: 100%;
    height: 400px;
    border-radius: 1.5rem;
    overflow: hidden;
    background: transparent;
    cursor: grab;
  }

  .island-container:active {
    cursor: grabbing;
  }

  .island-container canvas {
    display: block;
    width: 100%;
    height: 100%;
  }

  @media (min-width: 50em) {
    .island-container {
      height: 500px;
      border-radius: 4.5rem;
    }
  }
</style>
